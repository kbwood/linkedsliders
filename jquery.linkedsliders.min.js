/* http://keith-wood.name/linkedSliders.html
   Linked Sliders 1.1.0 for jQuery UI Slider 1.9.0.
   Written by Keith Wood (kbwood{at}iinet.com.au) January 2011.
   Available under the MIT (https://github.com/jquery/jquery/blob/master/MIT-LICENSE.txt) license. 
   Please attribute the authors if you use it. */
(function($){function LinkedSliders(){this._defaults={total:100,policy:'next'}}$.extend(LinkedSliders.prototype,{markerClassName:'hasLinkedSliders',propertyName:'linkedSliders',setDefaults:function(a){$.extend(this._defaults,a||{});return this},_attachPlugin:function(a,b,c){a=$(a);if(!a.hasClass('ui-slider')){throw'Please add slider functionality first';}if(a.hasClass(this.markerClassName)){return}var d={options:$.extend({},this._defaults),linked:c||{}};a.addClass(this.markerClassName).data(this.propertyName,d);this._optionPlugin(a,b)},_optionPlugin:function(c,d,e){c=$(c);var f=c.data(this.propertyName);if(!d||(typeof d=='string'&&e==null)){var g=d;d=(f||{}).options;return(d&&g?d[g]:d)}if(!c.hasClass(this.markerClassName)){return}d=d||{};if(typeof d=='string'){var g=d;d={};d[g]=e}$.extend(f.options,d);c.unbind('.'+this.propertyName).bind('slidechange.'+this.propertyName+',slide.'+this.propertyName,function(a,b){if(!q._linking){q._linking=true;q._linkSliders(c,a,b);q._linking=false}});q._linkSliders(c,null,{handle:c})},_destroyPlugin:function(a){a=$(a);if(!a.hasClass(this.markerClassName)){return}a.removeClass(this.markerClassName).removeData(this.propertyName).unbind('.'+this.propertyName)},_linkSliders:function(a,b,c){var d=a.data(this.propertyName);var e=d.linked.length?d.linked:$([]);var f=e.index($(c.handle).closest('.ui-slider'));var g=d.options.total;e.each(function(i){g-=$(this).slider('value')});var h=($.inArray(d.options.policy,['prev','last'])>-1?-1:+1);var j=(d.options.policy=='first'?0:(d.options.policy=='last'?e.length-1:f));for(var i=0;i<2*e.length;i++){if(j!=f){var k=e.eq(j);var l=k.slider('value');var m=k.slider('option','min');var n=k.slider('option','max');var o=0;if(d.options.policy=='all'){o=(i==e.length-1?g:Math.floor(g/Math.max(1,e.length-i)));o=Math.min(Math.max(l+o,m),n)}else{o=Math.min(Math.max(l+g,m),n)}k.slider('value',o);g-=(o-l);if(g==0){break}}j=(e.length+j+h)%e.length}}});var p=[''];function isNotChained(a,b){if(a=='option'&&(b.length==0||(b.length==1&&typeof b[0]=='string'))){return true}return $.inArray(a,p)>-1}$.fn.linkedSliders=function(a){var b=Array.prototype.slice.call(arguments,1);if(isNotChained(a,b)){return q['_'+a+'Plugin'].apply(q,[this[0]].concat(b))}var c=this;return this.each(function(){if(typeof a=='string'){if(!q['_'+a+'Plugin']){throw'Unknown command: '+a;}q['_'+a+'Plugin'].apply(q,[this].concat(b))}else{q._attachPlugin(this,a||{},c)}})};var q=$.linkedSliders=new LinkedSliders()})(jQuery);