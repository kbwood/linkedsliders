/* Linked Sliders 1.0.0 for jQuery UI Slider 1.8.6.
   Written by Keith Wood (kbwood{at}iinet.com.au) January 2011.
   Dual licensed under the GPL (http://dev.jquery.com/browser/trunk/jquery/GPL-LICENSE.txt) and 
   MIT (http://dev.jquery.com/browser/trunk/jquery/MIT-LICENSE.txt) licenses. 
   Please attribute the authors if you use it. */
(function($){var o='linkedSliders';function LinkedSliders(){this._defaults={total:100,policy:'next'}}$.extend(LinkedSliders.prototype,{markerClassName:'hasLinkedSliders',setDefaults:function(a){extendRemove(this._defaults,a||{});return this},_attachLinkedSliders:function(a,b,c){a=$(a);if(!a.hasClass('ui-slider')){throw'Please add slider functionality first';}if(a.hasClass(this.markerClassName)){return}a.addClass(this.markerClassName);this._updateLinkedSliders(a,b,c)},_changeLinkedSliders:function(a,b,c){a=$(a);if(!a.hasClass(this.markerClassName)){return}if(typeof b=='string'){var d=b;b={};b[d]=c}this._updateLinkedSliders(a,b)},_updateLinkedSliders:function(c,d,e){var f=$.data(c[0],o)||$.extend({},this._defaults);d=extendRemove(f,$.extend(d||{},e?{linked:e}:{}));$.data(c[0],o,d);c.unbind('.linkedSlider').bind('slidechange.linkedSlider,slide.linkedSlider',function(a,b){if(!$.linkedSliders._linking){$.linkedSliders._linking=true;$.linkedSliders._linkSliders(c,a,b);$.linkedSliders._linking=false}});$.linkedSliders._linkSliders(c,null,{handle:c})},_destroyLinkedSliders:function(a){a=$(a);if(!a.hasClass(this.markerClassName)){return}a.removeClass(this.markerClassName).unbind('.linkedSlider');$.removeData(a[0],o)},_linkSliders:function(a,b,c){var d=$.data(a[0],o);var e=d.linked.index($(c.handle).closest('.ui-slider'));var f=d.total;d.linked.each(function(i){f-=$(this).slider('value')});var g=($.inArray(d.policy,['prev','last'])>-1?-1:+1);var h=(d.policy=='first'?0:(d.policy=='last'?d.linked.length-1:e));for(var i=0;i<2*d.linked.length;i++){if(h!=e){var j=d.linked.eq(h);var k=j.slider('value');var l=j.slider('option','min');var m=j.slider('option','max');var n=0;if(d.policy=='all'){n=(i==d.linked.length-1?f:Math.floor(f/Math.max(1,d.linked.length-i)));n=Math.min(Math.max(k+n,l),m)}else{n=Math.min(Math.max(k+f,l),m)}j.slider('value',n);f-=(n-k);if(f==0){break}}h=(d.linked.length+h+g)%d.linked.length}}});function extendRemove(a,b){$.extend(a,b);for(var c in b){if(b[c]==null){a[c]=null}}return a}$.fn.linkedSliders=function(a){var b=Array.prototype.slice.call(arguments,1);var c=this;return this.each(function(){if(typeof a=='string'){$.linkedSliders['_'+a+'LinkedSliders'].apply($.linkedSliders,[this].concat(b))}else{$.linkedSliders._attachLinkedSliders(this,a||{},c)}})};$.linkedSliders=new LinkedSliders()})(jQuery);